(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-packageEorder"],{"0b24":function(e,t,a){"use strict";(function(e){a("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("dc8a");var n={data:function(){return{model:{order_type:"1",play_name:"",code:"",area:"",wx:"",remark:"",pay_type:"2",coupon_id:""},rules:{play_name:[{required:!0,message:"请输入游戏号",trigger:["change","blur"]}],code:[{required:!0,message:"请输入游戏内编号",trigger:["change","blur"]}],area:[{required:!0,message:"请输入区服",trigger:["change","blur"]}]},couponStyle:{color:"#fa3534"},payTypeList:[{id:"2",icon:"rmb-circle-fill",color:"#2979ff",label:"余额支付"},{id:"1",icon:"weixin-circle-fill",color:"#19be6b",label:"微信支付"}],payTypeShow:!1,areaShow:!1,areaList:[{value:"微信",label:"微信"},{value:"QQ",label:"QQ"}],couponShow:!1,couponList:[],curCoupon:{},curCouponIndex:null,preData:{spec:{price:0}},checked:!1,Info:{}}},computed:{totalPrice:function(){return Object.keys(this.Info).length&&this.$u.func.bcsub(this.$u.func.bcmul(this.Info.amount,this.Info.count),this.curCoupon.amount||0)||0}},onReady:function(){this.$refs.uForm.setRules(this.rules)},onLoad:function(e){this.findOrder(e.order_num),this.findCouponUserList()},methods:{findOrder:function(e){var t=this;this.$u.api.findOrder({order_num:e}).then((function(e){t.Info=e.data,t.model.play_name=e.data.play_name,t.model.code=e.data.code,t.model.area=e.data.area,t.model.wx=e.data.wx,t.model.remark=e.data.remark})).catch((function(e){}))},findCouponUserList:function(){var e=this;this.$u.api.findCouponUserList({price:this.totalPrice}).then((function(t){e.couponList=t.data})).catch((function(e){}))},areaConfirm:function(e){this.model.area=e[0].label},handleCoupon:function(e,t){this.curCouponIndex=t,this.curCoupon=e},handleAdd:function(){var t=this;if(!this.isLogin)return this.$u.route("/pages/public/login");this.$refs.uForm.validate((function(a){return a?t.checked?void(t.payTypeShow=!0):t.$u.toast("请先阅读并同意《用户协议》"):e.log("验证失败")}))},addEncoreOrder:function(){var e=this;this.$u.api.addEncoreOrder({p_order_num:this.Info.order_num,encore_type:1,play_user_ids:this.Info.play_user_ids,play_name:this.model.play_name,code:this.model.code,area:this.model.area,wx:this.model.wx,remark:this.model.remark}).then((function(t){e.wxPayMp(t.data.order_num)})).catch((function(t){e.$u.toast(t.msg)}))},wxPayMp:function(e){var t=this;t.$u.api.wxPayMp({order_num:e,order_type:t.model.order_type,pay_type:t.model.pay_type}).then((function(e){if(t.payTypeShow=!1,2==t.model.pay_type)return t.$u.toast("支付成功"),void setTimeout((function(){uni.switchTab({url:"/pages/order/index"})}),1500);t.$u.wx.wxpay({data:{timeStamp:e.data.timeStamp,nonceStr:e.data.nonceStr,package:e.data.package,signType:e.data.signType,paySign:e.data.paySign},success:function(){t.$u.toast("支付成功"),setTimeout((function(){uni.switchTab({url:"/pages/order/index"})}),1500)},fail:function(){t.$u.toast("支付失败")}})})).catch((function(e){t.$u.toast(e.msg)}))},handlePayType:function(e){this.model.pay_type=e},toAgreement:function(e){this.$u.route(e)}}};t.default=n}).call(this,a("ba7c")["default"])},"1ad77":function(e,t,a){"use strict";var n=a("58be"),i=a.n(n);i.a},"286b":function(e,t,a){var n=a("c86c");t=n(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 颜色变量 */\r\n/* 页面背景色 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.u-image[data-v-48a44ea0]{position:relative;transition:opacity .5s ease-in-out}.u-image__image[data-v-48a44ea0]{width:100%;height:100%}.u-image__loading[data-v-48a44ea0], .u-image__error[data-v-48a44ea0]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#f3f4f6;color:#909399;font-size:%?46?%}',""]),e.exports=t},3626:function(e,t,a){"use strict";a.r(t);var n=a("dc14"),i=a("860d");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("728f");var r=a("828b"),u=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"48a44ea0",null,!1,n["a"],void 0);t["default"]=u.exports},"4d6a":function(e,t,a){"use strict";a.r(t);var n=a("0b24"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},"58be":function(e,t,a){var n=a("d60a");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("967d").default;i("08fab855",n,!0,{sourceMap:!1,shadowMode:!1})},"728f":function(e,t,a){"use strict";var n=a("e1d9"),i=a.n(n);i.a},"860d":function(e,t,a){"use strict";a.r(t);var n=a("897a"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},"897a":function(e,t,a){"use strict";a("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("64aa");var n={name:"u-image",props:{src:{type:String,default:""},mode:{type:String,default:"aspectFill"},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:"auto"},shape:{type:String,default:"square"},borderRadius:{type:[String,Number],default:0},lazyLoad:{type:Boolean,default:!0},showMenuByLongpress:{type:Boolean,default:!0},loadingIcon:{type:String,default:"photo"},errorIcon:{type:String,default:"error-circle"},showLoading:{type:Boolean,default:!0},showError:{type:Boolean,default:!0},fade:{type:Boolean,default:!0},webp:{type:Boolean,default:!1},duration:{type:[String,Number],default:500},bgColor:{type:String,default:"#f3f4f6"}},data:function(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{}}},watch:{src:{immediate:!0,handler:function(e){e?(this.isError=!1,this.loading=!0):(this.isError=!0,this.loading=!1)}}},computed:{wrapStyle:function(){var e={};return e.width=this.$u.addUnit(this.width),e.height=this.$u.addUnit(this.height),e.borderRadius="circle"==this.shape?"50%":this.$u.addUnit(this.borderRadius),e.overflow=this.borderRadius>0?"hidden":"visible",this.fade&&(e.opacity=this.opacity,e.transition="opacity ".concat(Number(this.durationTime)/1e3,"s ease-in-out")),e}},methods:{onClick:function(){this.$emit("click")},onErrorHandler:function(e){this.loading=!1,this.isError=!0,this.$emit("error",e)},onLoadHandler:function(){var e=this;if(this.loading=!1,this.isError=!1,this.$emit("load"),!this.fade)return this.removeBgColor();this.opacity=0,this.durationTime=0,setTimeout((function(){e.durationTime=e.duration,e.opacity=1,setTimeout((function(){e.removeBgColor()}),e.durationTime)}),50)},removeBgColor:function(){this.backgroundStyle={backgroundColor:"transparent"}}}};t.default=n},b635:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var n={uImage:a("3626").default,uForm:a("924e").default,uFormItem:a("b3c3").default,uInput:a("7478a").default,uSelect:a("0ce4").default,uPopup:a("6698").default,uIcon:a("7066").default,uButton:a("b2d1").default,uCheckbox:a("98d3").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"u-type-white-bg u-m-b-30 u-p-30 u-radius-10"},[a("v-uni-view",{staticClass:"u-font-bold u-p-b-30"},[e._v("套餐信息")]),a("v-uni-view",{staticClass:"u-flex u-col-top"},[a("v-uni-view",[a("u-image",{attrs:{width:"130",height:"130",borderRadius:"10",src:e.Info.image}})],1),a("v-uni-view",{staticClass:"u-width-100 u-p-l-20"},[a("v-uni-view",{staticClass:"u-flex u-row-between u-p-b-20"},[a("v-uni-view",{staticClass:"u-width-100 u-line-1"},[e._v(e._s(e.Info.name))]),a("v-uni-view",{staticClass:"u-p-l-30 u-shrink-no"},[e._v("¥ "+e._s(e.Info.amount))])],1),a("v-uni-view",{staticClass:"u-font-24 u-content-color u-line-2"},[e._v("地图："+e._s(e.Info.map))])],1)],1)],1),a("v-uni-view",{staticClass:"u-type-white-bg u-m-b-30 u-p-lr-30 u-radius-10"},[a("u-form",{ref:"uForm",attrs:{model:e.model,rules:e.rules,"error-type":["toast"]}},[a("u-form-item",{attrs:{label:"游戏内昵称","label-width":"150",prop:"play_name",required:!0}},[a("u-input",{attrs:{inputAlign:"right",placeholder:"请输入游戏内昵称"},model:{value:e.model.play_name,callback:function(t){e.$set(e.model,"play_name",t)},expression:"model.play_name"}})],1),a("u-form-item",{attrs:{label:"游戏内编号","label-width":"150",prop:"code",required:!0}},[a("u-input",{attrs:{inputAlign:"right",placeholder:"请输入游戏内编号"},model:{value:e.model.code,callback:function(t){e.$set(e.model,"code",t)},expression:"model.code"}})],1),a("u-form-item",{attrs:{label:"区服","label-width":"150"}},[a("u-input",{attrs:{type:"select",placeholder:"请选择区服","input-align":"right"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.areaShow=!0}},model:{value:e.model.area,callback:function(t){e.$set(e.model,"area",t)},expression:"model.area"}})],1),a("u-form-item",{attrs:{label:"微信号","label-width":"150"}},[a("u-input",{attrs:{inputAlign:"right",placeholder:"请输入微信号"},model:{value:e.model.wx,callback:function(t){e.$set(e.model,"wx",t)},expression:"model.wx"}})],1),a("u-form-item",{attrs:{label:"订单备注","label-position":"top","label-width":"150"}},[a("u-input",{attrs:{type:"textarea",placeholder:"请输入订单备注"},model:{value:e.model.remark,callback:function(t){e.$set(e.model,"remark",t)},expression:"model.remark"}})],1)],1)],1),a("v-uni-view",{staticClass:"u-type-white-bg u-m-b-30 u-p-lr-30 u-radius-10"},[a("u-form-item",{attrs:{"left-icon":"coupon-fill",leftIconStyle:e.couponStyle,label:"优惠券","label-width":"150"}},[a("u-input",{attrs:{type:"select",inputAlign:"right",placeholder:e.couponList.length?"请选择优惠券":"暂无可用优惠券"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.couponList.length&&(e.couponShow=!0)}},model:{value:e.curCoupon.name,callback:function(t){e.$set(e.curCoupon,"name",t)},expression:"curCoupon.name"}})],1)],1),a("u-select",{attrs:{mode:"single-column",list:e.areaList},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.areaConfirm.apply(void 0,arguments)}},model:{value:e.areaShow,callback:function(t){e.areaShow=t},expression:"areaShow"}}),a("u-popup",{attrs:{mode:"bottom","safe-area-inset-bottom":!0,borderRadius:"20",closeable:!0},model:{value:e.couponShow,callback:function(t){e.couponShow=t},expression:"couponShow"}},[a("v-uni-view",{staticClass:"u-p-30"},[a("v-uni-view",{staticClass:"u-p-b-30"},[e._v("可使用优惠券（共"+e._s(e.couponList.length)+"张）")]),a("v-uni-scroll-view",{staticStyle:{height:"42vh"},attrs:{"scroll-y":!0}},e._l(e.couponList,(function(t,n){return a("v-uni-view",{key:n,staticClass:"list-cell",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.handleCoupon(t,n)}}},[a("v-uni-view",{staticClass:"__left u-shrink-no"},[a("v-uni-view",{staticClass:"u-font-bold u-font-64 u-type-warning"},[a("v-uni-text",{staticClass:"u-p-r-20 u-font-28"},[e._v("¥")]),e._v(e._s(t.amount))],1),a("v-uni-view",{staticClass:"u-font-22 u-tips-color"},[e._v("满"+e._s(t.full_amount)+"可用")])],1),a("v-uni-view",{staticClass:"__right"},[a("v-uni-view",[a("v-uni-view",{staticClass:"u-font-36 u-p-b-25"},[e._v(e._s(t.name))]),a("v-uni-view",{staticClass:"u-font-24 u-tips-color"},[e._v("有效期至"+e._s(e._f("date")(t.end_time,"yy-mm-dd")))])],1),a("v-uni-view",[a("u-icon",{attrs:{name:"checkmark-circle-fill",size:"42",color:e.curCouponIndex==n?"#ff9900":"#909399"}})],1)],1)],1)})),1),a("v-uni-view",{staticClass:"u-flex u-row-between u-p-t-30"},[a("v-uni-text",{staticClass:"u-p-r-50 u-shrink-no",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.curCoupon={},e.curCouponIndex=null,e.couponShow=!1}}},[e._v("暂不使用")]),a("v-uni-view",{staticClass:"u-width-100"},[a("u-button",{attrs:{type:"warning",shape:"circle"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.couponShow=!1}}},[e._v("确认使用")])],1)],1)],1)],1),a("u-popup",{attrs:{mode:"bottom","safe-area-inset-bottom":!0,borderRadius:"20",closeable:!0},model:{value:e.payTypeShow,callback:function(t){e.payTypeShow=t},expression:"payTypeShow"}},[a("v-uni-view",{staticClass:"u-p-30"},[a("v-uni-view",{staticClass:"u-text-center u-font-bold u-font-40 u-p-b-50 u-border-bottom"},[a("v-uni-text",{staticClass:"u-p-r-8"},[e._v("¥")]),a("v-uni-text",{staticClass:"u-font-80"},[e._v(e._s(e.totalPrice))])],1),a("v-uni-view",{},e._l(e.payTypeList,(function(t,n){return a("v-uni-view",{key:n,staticClass:"__cell u-flex u-row-between u-m-t-30",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.handlePayType(t.id)}}},[a("u-icon",{attrs:{name:t.icon,size:"42",color:t.color,label:t.label,"label-color":"#303133"}}),e.model.pay_type==t.id?a("u-icon",{attrs:{name:"checkmark-circle-fill",size:"30",color:"#2979ff"}}):e._e()],1)})),1),a("v-uni-view",{staticClass:"u-font-24 u-m-tb-45 u-text-center"},[e._v("如需其他支付方式请"),a("v-uni-text",{staticClass:"u-p-l-10 u-type-warning"},[e._v("联系客服")])],1),a("v-uni-view",[a("u-button",{attrs:{type:"primary",shape:"circle"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addEncoreOrder.apply(void 0,arguments)}}},[e._v("确认支付")])],1)],1)],1),a("v-uni-view",{staticClass:"submit-btn safe-area-inset-bottom"},[a("v-uni-view",{staticClass:"agreement"},[a("u-checkbox",{attrs:{shape:"circle",activeColor:"#ff9900"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),a("v-uni-view",{staticClass:"agreement-text",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.checked=!e.checked}}},[e._v("勾选即表示已阅读并同意"),a("v-uni-text",{staticClass:"agreement-color",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.toAgreement("/pages/agreement/index")}}},[e._v("《用户协议》")])],1)],1),a("v-uni-view",{staticClass:"u-flex u-row-between u-p-30"},[a("v-uni-view",[a("v-uni-text",{staticClass:"u-font-24"},[e._v("合计： ¥")]),a("v-uni-text",{staticClass:"u-font-38 u-p-l-6"},[e._v(e._s(e.totalPrice))])],1),a("v-uni-view",[a("u-button",{attrs:{type:"primary",shape:"circle",size:"medium"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleAdd.apply(void 0,arguments)}}},[e._v("确认下单")])],1)],1)],1)],1)},o=[]},c2fc:function(e,t,a){"use strict";a.r(t);var n=a("b635"),i=a("4d6a");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("1ad77");var r=a("828b"),u=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"35c5baf9",null,!1,n["a"],void 0);t["default"]=u.exports},d60a:function(e,t,a){var n=a("c86c");t=n(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 颜色变量 */\r\n/* 页面背景色 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-35c5baf9]{background:#f5f5f5}body.?%PAGE?%[data-v-35c5baf9]{background:#f5f5f5}.container[data-v-35c5baf9]{padding:%?30?%}.container .__cell[data-v-35c5baf9]{background:#f7f7f7;border-radius:%?10?%;padding:%?40?%}.container .list-cell[data-v-35c5baf9]{display:flex;border-radius:%?20?%;border:2px solid #eee;padding:%?30?% 0;margin-bottom:%?30?%}.container .list-cell .__left[data-v-35c5baf9]{position:relative;padding:0 %?50?%}.container .list-cell .__left[data-v-35c5baf9]::after{position:absolute;content:" ";right:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);height:%?85?%;border:%?2?% solid #eee}.container .list-cell .__right[data-v-35c5baf9]{display:flex;justify-content:space-between;align-items:center;width:100%;padding:0 %?30?%}.container .agreement[data-v-35c5baf9]{display:flex;align-items:center;padding:%?20?% %?30?%;background:#f8e3d2}.container .agreement .agreement-text[data-v-35c5baf9]{color:#272727}.container .agreement .agreement-color[data-v-35c5baf9]{color:#ff7200}.container .agreement[data-v-35c5baf9]  .u-checkbox__label{margin-right:0!important}.container .submit-btn[data-v-35c5baf9]{background:#fff}',""]),e.exports=t},dc14:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var n={uIcon:a("7066").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"u-image",style:[e.wrapStyle,e.backgroundStyle],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick.apply(void 0,arguments)}}},[e.isError?e._e():a("v-uni-image",{staticClass:"u-image__image",style:{borderRadius:"circle"==e.shape?"50%":e.$u.addUnit(e.borderRadius)},attrs:{src:e.src,mode:e.mode,"lazy-load":e.lazyLoad,"show-menu-by-longpress":e.showMenuByLongpress},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.onErrorHandler.apply(void 0,arguments)},load:function(t){arguments[0]=t=e.$handleEvent(t),e.onLoadHandler.apply(void 0,arguments)}}}),e.showLoading&&e.loading?a("v-uni-view",{staticClass:"u-image__loading",style:{borderRadius:"circle"==e.shape?"50%":e.$u.addUnit(e.borderRadius),backgroundColor:e.bgColor}},[e.$slots.loading?e._t("loading"):a("u-icon",{attrs:{name:e.loadingIcon,width:e.width,height:e.height}})],2):e._e(),e.showError&&e.isError&&!e.loading?a("v-uni-view",{staticClass:"u-image__error",style:{borderRadius:"circle"==e.shape?"50%":e.$u.addUnit(e.borderRadius)}},[e.$slots.error?e._t("error"):a("u-icon",{attrs:{name:e.errorIcon,width:e.width,height:e.height}})],2):e._e()],1)},o=[]},e1d9:function(e,t,a){var n=a("286b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("967d").default;i("0812e882",n,!0,{sourceMap:!1,shadowMode:!1})}}]);